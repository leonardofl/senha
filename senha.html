<!-- Senha, desenvolvido por Leonardo Leite em 12/03
e-mail: leonardo-fl@bol.com.br 
site: www.ocinza.cjb.net -->
<html>
<head>
<title>Senha</title>
<meta charset="ISO-8859-1">
<script>
cores = new Array (5);
cores[0]="amarelo";
cores[1]="azul";
cores[2]="laranja";
cores[3]="marrom";
cores[4]="verde";
cores[5]="vermelho";
cor=0; //indica a cor selecionada pelo jogador
jogada=1; //indica em que jogada (rodada) o jogador está

//procedimentos que geram a senha
Senha = new Array (3); //vetor onde é guardada a senha
k=0;
while (k<4) {
 Senha[k]=ale(6);
 if (busca(k)==false) k++; 
}
//for (i=0;i<=3;i++) alert(Senha[i]); //mostra a senha no começo do jogo

function ale(n) {//função que gera um nº aleatório entre 0 e n-1
 x=Math.random();
 x=Math.round(x*100+n)%n;
 return x;
}

function busca(k) { //função que verifica se o nº aleatório gerado não é repetido
 result=false;
 for (i=k-1;i>=0;i--) 
  if (Senha[k]==Senha[i]) result=true;
 return result; 
}

function teclou(event) {
 tecla=String.fromCharCode(event.which);
 if ((tecla=='q')||(tecla=="Q")) mudarcor();
 if (tecla==1) window.open ('ajuda.html', 'Ajuda', 'toolbar=no, status=no, width=700 height=350'); 
 if (tecla==2) window.location.reload();
 if (tecla==3) window.open ('sobre.html', 'Sobre', 'toolbar=no, status=no, width=450 height=140');
}

function tela(){ //desenha a situação inicial da coluna esquerda da tela 
 document.write ("<br>");
 for (i=1;i<6;i++) 
  document.write ("<img src='figs/senha"+i+".gif' name='sen'>");
 document.write ("<br>");
 k=0;
 for (i=10;i>0;i--) {
  document.write ("<br>");
  for (j=1;j<5;j++) {
   document.write ("<img src='figs/vazio.gif' name='quadra' cor=9 num="+k+" fila="+i+" onclick='quadraclk(" + k + "," + i + ")'>");
   k++;
  }
  document.write ("&nbsp;&nbsp;&nbsp;&nbsp;");
  for (j=1;j<5;j++) document.write ("<img src='figs/vazio.gif' name='ponto'>");
 } 
}

function mudarcor() {
 cor++;
 if (cor==6) cor=0;
 selec.src="figs/"+cores[cor]+".gif";
}

function quadraclk(num,fila) {
 if (fila==jogada) {
  quadra[num].src="figs/"+cores[cor]+".gif";
  quadra[num].cor=cor;
 }
}

function jogar() { //procedimentos executados ao fim da jogada
 if (busca2(jogada)==true) alert ("Jogada Inválida!"); 
 else {
  marcarpts(jogada);
  jogada++;
 } 
 if (jogada==11) mostrar();
}

function busca2(){ //verefica se há algum quadrado vazio na fila, ou se o jogador pôs cores repetidas
 result=false;
 for (i=(10-jogada)*4;i<=(10-jogada)*4+3;i++)
  if (quadra[i].cor==9) result=true;
 for (i=(10-jogada)*4;i<=(10-jogada)*4+2;i++)
  for (j=i+1;j<=(10-jogada)*4+3;j++)
   if (quadra[i].cor==quadra[j].cor) result=true;  
 return result;  
}

function marcarpts(jog) { //função que determina os pontos marcados pelo jogador
 //1ª parte - verefica os pontos pretos
 k1=(10-jog)*4;
 k2=(10-jog)*4;
 pretos=0;
 for (i=0;i<4;i++) { 
  if (quadra[k1].cor==Senha[i]) {
   ponto[k2].src="figs/preto.gif";
   k2++;
   pretos++;
  } 
  k1++;
 } 
 if (pretos==4) jogada=10;
 //2ª parte - verefica os pontos brancos
 k1=(10-jog)*4;
 m=k1;
 for (i=0;i<4;i++) {
  for (j=m;j<=m+3;j++)
   if ((i!=j%4)&&(quadra[j].cor==Senha[i])) {
    ponto[k2].src="figs/branco.gif";
	k2++;
   }
   k1++;
 }
}

function mostrar() { //mostra a senha
 sen[0].src="figs/senha0.gif"; 
 for (i=1;i<5;i++)
  sen[i].src="figs/"+cores[Senha[i-1]]+".gif";
}
</script>
</head>

<body onkeypress="teclou(event)">
<table width="100%" height="387" border="1">
  <tr align="center" valign="top"> 
    <td height="288" colspan="2"> 
      <script>tela();</script>
    </td>
	<td width="38%" valign="top">
      <p>&nbsp;</p><p>&nbsp;</p>
      <p><font size="4">Cor atual:</font><font color="#FFFFFF">.....</font>
	  <img src="figs/amarelo.gif" name="selec"> <br><br>
      <input type="button" name="cambio" value="Trocar Cor (q)" onClick="mudarcor()"></p>
      <p><input type="button" name="efetuar" value="Efetuar Jogada" onClick="if (jogada<11) jogar()"></p>
      <p>1 - Ajuda<br><br>
      2 - Novo Jogo<br><br>
      3- Sobre</p>
   </td>
  </tr>
</table>

</body>
</html>
